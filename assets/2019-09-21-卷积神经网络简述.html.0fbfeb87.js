import{_ as l,a as o,o as p,c as r,f as a,b as t,F as s,d as e,x as i}from"./app.3547d211.js";var $="/img/w_cc_juanji01.png",c="/img/w_cc_juanji02.png",d="/img/w_cc_juanji03.png",_="/img/w_cc_juanji04.png";const m={},h=e("\u4E0A\u4E00\u7BC7 \u25B6\uFE0F "),g={href:"https://zhaoylong.github.io/2019/05/23/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%AE%80%E8%BF%B0/",target:"_blank",rel:"noopener noreferrer"},u=e("\u300A\u5377\u79EF\u795E\u7ECF\u7F51\u7EDC\u300B\uFF08\u7B2C\u4E00\u7BC7\uFF09"),b=i(`<h1 id="\u524D\u8A00" tabindex="-1"><a class="header-anchor" href="#\u524D\u8A00" aria-hidden="true">#</a> \u524D\u8A00</h1><p>\u65F6\u95F4\u9694\u4E86\u597D\u4E45\u7684\u4E9A\u5B50......<br> \u90FD\u5FD8\u8BB0\u4E86......</p><h2 id="_4-\u6C60\u5316-pooling-\u5C42" tabindex="-1"><a class="header-anchor" href="#_4-\u6C60\u5316-pooling-\u5C42" aria-hidden="true">#</a> 4 \u6C60\u5316\uFF08pooling\uFF09\u5C42</h2><h3 id="_4-1-\u7B80\u8FF0" tabindex="-1"><a class="header-anchor" href="#_4-1-\u7B80\u8FF0" aria-hidden="true">#</a> 4.1 \u7B80\u8FF0</h3><p>\u901A\u8FC7\u5377\u79EF\u83B7\u5F97\u7279\u5F81[features]\u540E\uFF0C\u4E0B\u4E00\u6B65\u5C06\u5229\u7528\u83B7\u53D6\u7684\u7279\u5F81\u53BB\u505A\u5206\u7C7B\u3002\u4F46\u9762\u4E34\u7740\u8BA1\u7B97\u4E86\u5E9E\u5927\u7684\u6311\u6218\u3002\u4F8B\u5982\uFF1A\u4E00\u4E2A$96 \\times 96$\u50CF\u7D20\u7684\u56FE\u50CF\uFF0C\u5047\u8BBE\u6211\u4EEC\u5DF2\u7ECF\u5B66\u4E60\u5F97\u5230\u4E86400\u4E2A\u5B9A\u4E49\u5728$8 \\times 8$\u8F93\u5165\u4E0A\u7684\u7279\u5F81\uFF0C\u6BCF\u4E00\u4E2A\u7279\u5F81\u548C\u56FE\u50CF\u5377\u79EF\u90FD\u4F1A\u5F97\u5230\u4E00\u4E2A$(96-8+1) \\times (96-8+1) = 7921$\u7EF4\u7684\u7279\u5F81\uFF0C\u7531\u4E8E\u6709400\u4E2A\u7279\u5F81\uFF0C\u6240\u4EE5\u6BCF\u4E2A\u6837\u672C\u4F8B[example]\u90FD\u4F1A\u5F97\u5230\u4E00\u4E2A$89^2 \\times 400 = 3168400$\u7EF4\u7684\u5377\u79EF\u7279\u5F81\u5411\u91CF\u3002\u5F53\u7279\u5F81N\u975E\u5E38\u5927\u65F6\uFF0C\u975E\u5E38\u96BE\u4EE5\u8BA1\u7B97\uFF0C\u4E14\u6613\u51FA\u73B0\u8FC7\u62DF[over-fitting]\u3002\u6CE8\uFF1A\u6BCF\u4E2A\u5377\u79EF\u6A21\u7248\u751F\u6210\u4E00\u4E2A\u7279\u5F81\uFF0C\u6BCF\u4E2A\u7279\u5F81\u662F$89^2$\u7EF4\u3002</p><p>\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0C\u91C7\u53D6\u4E86\u4E00\u79CD\u53EB\u505A\u201C\u6C60\u5316\u201D\u7684\u64CD\u4F5C\uFF0C\u5E73\u5747\u6C60\u5316\u6216\u8005\u6700\u5927\u6C60\u5316\u3002</p><p>\u82E5\u9009\u62E9\u56FE\u50CF\u4E2D\u8FDE\u7EED\u8303\u56F4\u4F5C\u4E3A\u6C60\u5316\u533A\u57DF\uFF0C\u5E76\u4E14\u53EA\u662F\u6C60\u5316\u76F8\u540C\u7684\u9690\u85CF\u5355\u5143\u4EA7\u751F\u7684\u7279\u5F81\uFF0C\u90A3\u4E48\u8FD9\u4E9B\u6C60\u5316\u5355\u5143\u5C31\u5177\u6709\u5E73\u79FB\u4E0D\u53D8\u6027[translationinvariant]\u3002</p><ul><li>\u5F62\u5F0F\u5316\u63CF\u8FF0\uFF1A <ul><li>\u5728\u83B7\u53D6\u5230\u5377\u79EF\u7279\u5F81\u540E\uFF0C\u786E\u5B9A\u6C60\u5316\u533A\u57DF\u7684\u5927\u5C0F\uFF0C\u6765\u6C60\u5316\u5377\u79EF\u7279\u5F81\u3002\u5C06\u5377\u79EF\u7279\u5F81\u5212\u5206\u5230\u6570\u4E2A\u5927\u5C0F\u76F8\u7B49\u4E0D\u76F8\u4EA4\u7684\u533A\u57DF\uFF0C\u53D6\u8BE5\u533A\u57DF\u7684\u5E73\u5747\u503C\u6216\u8005\u6700\u5927\u503C\u6765\u8868\u793A\u8BE5\u533A\u57DF\u7684\u7279\u5F81\u3002\u6C60\u5316\u540E\u7684\u7279\u5F81\u4FBF\u53EF\u4EE5\u7528\u6765\u505A\u5206\u7C7B\u3002</li></ul></li></ul><h2 id="_4-2-pooling\u5C42\u7684\u5B9E\u73B0\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_4-2-pooling\u5C42\u7684\u5B9E\u73B0\u65B9\u6CD5" aria-hidden="true">#</a> 4.2 pooling\u5C42\u7684\u5B9E\u73B0\u65B9\u6CD5</h2><p>CNN\u4E2D\uFF0C\u5377\u79EF\u5C42\u540E\u63A5pooling\u5C42\u3002pooling\u5C42\u5BF9\u5377\u79EF\u5C42\u8F93\u51FA\u4FE1\u606F\u8FDB\u884C\u7B80\u5316\u3002\u4E0E\u5377\u79EF\u5C42\u7C7B\u4F3C\uFF0C\u9700\u8981\u6307\u5B9A\u6C60\u5316\u533A\u57DF\u7684\u5927\u5C0F\u548C\u6B65\u957F\u3002</p><ul><li>\u5047\u5B9A\u8F93\u5165\u7279\u5F81\u7684\u5927\u5C0F\u7EF4 $h \\times w$</li><li>\u6C60\u5316\u533A\u57DF\u7684\u5927\u5C0F\u7EF4 $f \\times f$</li><li>\u6B65\u957F\u4E3A$s$</li></ul><p>\u5219\u6C60\u5316\u8FD0\u7B97\u7684\u8F93\u51FA\u5927\u5C0F\u4E3A\uFF1A</p><p>$$ h^{&#39;} = \\lfloor \\frac{h-f+s}{s} \\rfloor \\ w^{&#39;} = \\lfloor \\frac{w-f+s}{s} \\rfloor $$</p><p>\u4F8B\u5982\uFF0C\u5F53\u8F93\u5165\u7279\u5F81a\u4E3A <br></p><p>$$ a = \\begin{pmatrix} 1 &amp; 3 &amp; 0 &amp; -1 \\ -2 &amp; 0 &amp; 3 &amp; 2 \\ 2 &amp; -3 &amp; -1 &amp; 4 \\ 4 &amp; 2 &amp; 0 &amp; 1 \\end{pmatrix} $$</p><p>\u4EE5$2 \\times 2$\u4E3Apooling\u533A\u57DF\u5927\u5C0F\u3001\u6B65\u957F\u4E3A1\u65F6\u7684max-pooling\u8FD0\u7B97\u8FC7\u7A0B\u3002\u5F97\u5230\u7684\u6C60\u5316\u8F93\u51FA\u4E3A\uFF1A</p><p>$$ \\begin{pmatrix} 3&amp;3&amp;3 \\ 2&amp;3&amp;4 \\ 4&amp;2&amp;4 \\end{pmatrix} $$</p><p>\u6C60\u5316\u64CD\u4F5C\u53EF\u6709\u6548\u5730\u5BF9\u8F93\u5165\u7684\u7279\u5F81\u5B9E\u73B0\u91C7\u6837\uFF0C\u4ECE\u800C\u83B7\u5F97\u7D27\u51D1\u7684\u7279\u5F81\u8868\u793A\u3002\u53BB\u9664\u90A3\u4E9B\u4E0D\u663E\u8457\u7684\u7279\u5F81\u4F4D\u7F6E\uFF0C\u4ECE\u800C\u8FDB\u4E00\u6B65\u51CF\u5C11\u4E86\u53C2\u6570\u4E2A\u6570\u3002</p><p style="text-align:center;">Max pooling \u8FD0\u7B97\u793A\u610F\u56FE</p> ![Max-pooling](/img/pool_img_02.jpg) <p>\u7531\u4E8E\u5377\u79EF\u5C42\u5305\u542B\u591A\u4E2A\u7279\u5F81\u6620\u5C04[\u4E00\u4E2A\u6620\u5C04\u5BF9\u5E94\u4E00\u4E2A\u5377\u79EF\u6EE4\u6CE2\u5668]\uFF0Cmax-pooling\u9700\u8981\u5E94\u7528\u4E8E\u6BCF\u4E2A\u7279\u5F81\u6620\u5C04\u3002\u82E5\u5305\u542B\u662F\u90A3\u4E2A\u7279\u5F81\u6620\u5C04\u7684\u6C60\u5316\u8FC7\u7A0B\uFF0C\u4F1A\u5F97\u5230\u4E09\u4E2Amax\u6C60\u5316\u8F93\u51FA\u3002</p><p style="text-align:center;">CNN\u624B\u7ED8\u56FE</p> ![\u4E2A\u4EBA\u542C\u8BFE\u8BB0\u5F55](/img/pooling_img_01.jpg) <h2 id="_5-\u5168\u8FDE\u63A5\u5C42" tabindex="-1"><a class="header-anchor" href="#_5-\u5168\u8FDE\u63A5\u5C42" aria-hidden="true">#</a> 5 \u5168\u8FDE\u63A5\u5C42</h2><p>\u5728CNN\u67B6\u6784\u7684\u672B\u7AEF\u662F\u5168\u8FDE\u63A5\u5C42\uFF0C\u5373\u5728\u5168\u8FDE\u63A5\u5C42\u4E2D\u7684\u6BCF\u4E00\u4E2A\u8282\u70B9\u4E0E\u4E0A\u4E00\u5C42\u6240\u6709\u8282\u70B9\u90FD\u8FDE\u63A5\u3002\u5168\u8FDE\u63A5\u5C42\u53EF\u4EE5\u6709\u591A\u4E2A\uFF0C\u8FD9\u7C7B\u4F3C\u4E8E\u524D\u9988\u795E\u7ECF\u7F51\u7EDC\u4E2D\u7684\u9690\u85CF\u5C42\uFF0C\u7136\u540E\u8FDE\u63A5\u5230\u8F93\u51FA\u5C42\uFF0C\u5982\u542B\u6709Softmax\u3001SVM\u7684\u8F93\u51FA\u5C42\uFF0C\u5B8C\u6210\u5206\u7C7B\u4EFB\u52A1\u3002</p><h2 id="_6-\u7B80\u5316\u67B6\u6784cnn\u7684\u8BAD\u7EC3\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_6-\u7B80\u5316\u67B6\u6784cnn\u7684\u8BAD\u7EC3\u65B9\u6CD5" aria-hidden="true">#</a> 6 \u7B80\u5316\u67B6\u6784CNN\u7684\u8BAD\u7EC3\u65B9\u6CD5</h2><p>CNN\u53EF\u4EE5\u5305\u542B\u591A\u4E2A\u5C42\uFF0C\u8FD9\u4E9B\u5C42\u4E3B\u8981\u5305\u62EC\u4E0B\u9762\u4E09\u79CD\uFF1A\u5377\u79EF\u5C42\u3001Pooling\u3001\u5168\u8FDE\u63A5\u5C42\u3002</p><p>\u6240\u8C13\u7B80\u5316\uFF0C\u6307\u7684\u662F\u5377\u79EF\u5C42\u7684\u6BCF\u4E2A\u8F93\u51FA\u7279\u5F81\u53EA\u4F7F\u7528\u4E00\u4E2A\u5377\u79EF\u6EE4\u6CE2\u5668\u4E0E\u524D\u4E00\u5C42\u7684\u4E00\u4E2A\u8F93\u51FA\u751F\u6210\u3002\u8BAD\u7EC3\u65B9\u6CD5\u5219\u5206\u4E3A\u4FE1\u606F\u7684\u6B63\u5411\u4F20\u64AD\u548C\u53CD\u5411\u4F20\u64AD\u8FC7\u7A0B\u3002</p><h3 id="_6-1-\u5377\u79EF\u5C42-convolution-layers" tabindex="-1"><a class="header-anchor" href="#_6-1-\u5377\u79EF\u5C42-convolution-layers" aria-hidden="true">#</a> 6.1 \u5377\u79EF\u5C42[Convolution Layers]</h3><p>\uFF081\uFF09\u4FE1\u606F\u5728\u5377\u79EF\u5C42\u7684\u6B63\u5411\u4F20\u64AD<br> \u5047\u5B9ACNN\u4E2D\u7684\u5F53\u524D\u7B2C$l$\u5C42\u4E3A\u5377\u79EF\u5C42\uFF0C\u5176\u524D\u4E00\u5C42\u7684\u8F93\u51FA\u4E3A$a_{l-1} \\in R^{N \\times N}$\uFF0C\u6240\u4F7F\u7528\u7684\u5377\u79EF\u6EE4\u6CE2\u5668\uFF08\u6B64\u5904\u5047\u5B9A\u53EA\u4F7F\u7528\u4E00\u4E2A\u6EE4\u6CE2\u5668\uFF09\u4E3A$w \\in R^{N \\times N}$\uFF0C\u5219\u5377\u79EF\u5C42\u7684\u8F93\u51FA\u4E3A$a_{l} \\in R^{(N-m+1) \\times (N-m+1)}$\u3002\u5728\u6B64\u5C42\u7684\u4FE1\u606F\u4F20\u64AD\u8FC7\u7A0B\u7B80\u8FF0\u4E3A\uFF1A</p><p>$$ a_{l-1} \\underrightarrow{\\quad w \\quad} z_{l} \\underrightarrow{\\quad f(\\cdot ) \\quad} a_{l} $$</p><p>\u5176\u5305\u542B\u5982\u4E0B\u4E24\u4E2A\u8FC7\u7A0B\uFF1A<br> 1\uFF09\u7B2C$l$\u5C42\u7684\u51C0\u8F93\u5165\u4E3A</p><p>$$ z_{l} = w \\ast a_{l-1} + b11^{T} $$</p><p>\u5176\u4E2D$\\ast$\u8868\u793A\u4E8C\u7EF4\u5377\u79EF\u8FD0\u7B97\uFF0C\u5176\u6240\u5BF9\u5E94\u7684Matlab\u4EE3\u7801\u4E3A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>z_l <span class="token operator">=</span> <span class="token function">conv2</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> a_l_1<span class="token punctuation">,</span> <span class="token string">&#39;valid&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> b
<span class="token comment">//\u6B64\u5904\u4F7F\u7528\u7684\u5377\u79EF\u65B9\u5F0F\u4E3A\u2018valid\u2019</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2\uFF09\u975E\u7EBF\u6027\u8F93\u51FA</p><p>$$ a_{l} = f(z_{l}) $$</p><p>\uFF082\uFF09\u5377\u79EF\u5C42\u53C2\u6570$w$\u548C$b$\u5B66\u4E60<br> \u5047\u5B9A\u7F51\u7EDC\u7684\u4EE3\u4EF7\u51FD\u6570\u4E3A$J(\\cdot)$\uFF0C\u91C7\u7528\u53CD\u5411\u4F20\u64AD\u7B97\u6CD5\u6765\u66F4\u65B0\u7F51\u7EDC\u53C2\u6570\u9700\u8981\u8BA1\u7B97\u4E24\u4E2A\u53C2\u6570\u7684\u68AF\u5EA6\uFF0C\u5373$\\nabla_{w}J$\u548C$\\nabla_{b}J$\u3002\u4EE4$\\delta_{l}$\u8868\u793A\u7531\u53CD\u5411\u4F20\u64AD\u7B97\u6CD5\u4F20\u9012\u5230\u5F53\u524D\u7B2C$l$\u5C42\u7684\u6B8B\u5DEE\uFF0C\u5373$\\delta_{l} = \\nabla_{z_{l}}J = D[J;z_{l}]^{T}$\u3002</p><p>1\uFF09$w$\u5173\u4E8E$J(\\cdot)$\u7684\u68AF\u5EA6\uFF1A$\\nabla_{w}J$<br> \u6C42\u5FAE\u5206</p><p>$$ \\begin{aligned} d(J ; \\omega) &amp;=\\operatorname{Tr}\\left(D\\left[J ; \\mathrm{z}<em>{\\ell}\\right] d\\left(\\mathrm{z}</em>{\\ell} ; \\omega\\right)\\right) \\ &amp;=\\operatorname{Tr}\\left(\\delta_{\\ell}^{T} d\\left(\\mathrm{z}<em>{\\ell} ; \\omega\\right)\\right) \\ &amp;=\\operatorname{Tr}\\left(\\delta</em>{\\ell}^{T} d\\left(\\omega * \\mathrm{a}<em>{\\ell-1}\\right)\\right) \\ &amp;=\\operatorname{Tr}\\left(\\mathrm{a}</em>{\\ell-1} * \\delta_{\\ell}^{T} d \\omega\\right) \\end{aligned} $$</p><p>\u4ECE\u800C\u5F97\u5230</p><p>$$ \\nabla_{w}J = \\delta_{l} \\ast \\tilde{a}<em>{l-1} = \\tilde{\\delta}</em>{l} \\ast a_{l-1} $$</p><p>\u5176\u4E2D$\\tilde{B}$\u8868\u793A\u5C06$B$\u65CB\u8F6C$180^{\\circ}$\uFF0C\u5373</p><p>$$ \\left[\\begin{array}{l}{1,2} \\ {3,4}\\end{array}\\right] \\rightarrow\\left[\\begin{array}{l}{4,3} \\ {2,1}\\end{array}\\right] $$</p><p>\u6240\u5BF9\u5E94\u7684Matlab\u4EE3\u7801\u4E3A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>nabla_w_J <span class="token operator">=</span> <span class="token function">conv2</span><span class="token punctuation">(</span>a_l_1<span class="token punctuation">,</span> <span class="token function">rot90</span><span class="token punctuation">(</span>delta_l<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;valid&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>2\uFF09$b$\u5173\u4E8E$J(\\cdot)$\u7684\u68AF\u5EA6\uFF1A$\\nabla_{b}J$<br> \u6C42\u5FAE\u5206</p><p>$$ \\begin{aligned} d(J ; \\omega) &amp;=\\operatorname{Tr}\\left(D\\left[J ; \\mathbf{z}<em>{\\ell}\\right] d\\left(\\mathbf{z}</em>{\\ell} ; b\\right)\\right) \\ &amp;=\\operatorname{Tr}\\left(\\delta_{\\ell}^{T} \\mathbf{1} \\mathbf{1}^{T}\\right) d b \\ &amp;=\\mathbf{1}^{T} \\delta_{\\ell} \\mathbf{1} d b \\end{aligned} $$</p><p>\u56E0\u6B64</p><p>$$ \\nabla_{b} = 1^{T} \\delta_{l}1 $$</p><h3 id="_6-2-pooling\u5C42" tabindex="-1"><a class="header-anchor" href="#_6-2-pooling\u5C42" aria-hidden="true">#</a> 6.2 Pooling\u5C42</h3><p>\uFF081\uFF09Pooling\u51FD\u6570<br> Pooling\u5C42\u5BF9\u8F93\u5165\u5E94\u7528Pooling\u51FD\u6570\u4F5C\u4E3A\u8F93\u51FA\u3002Pooling\u51FD\u6570\u4F7F\u7528\u67D0\u4E00\u4F4D\u7F6E\u7684\u76F8\u90BB\u8F93\u51FA\u7684\u603B\u4F53\u7EDF\u8BA1\u7279\u5F81\u6765\u4EE3\u66FF\u7F51\u7EDC\u5728\u8BE5\u4F4D\u7F6E\u7684\u8F93\u51FA\u3002\u7ED9\u5B9Apooling\u5C42\u7684\u4E00\u4E2Apool\u4E2D\u7684\u8282\u70B9$[x_{i}]_{i=1}^{N}$\uFF0C\u5E38\u7528\u7684\u4E24\u79CDPooling\u51FD\u6570\u5B9A\u4E49\u4E3A\uFF1A</p><p>max-pooling</p><p>$$ \\psi(\\mathbf{x})=\\max <em>{i} \\mathbf{x}</em>{i} $$</p><p>average pooling</p><p>$$ \\psi(\\mathbf{x})=\\frac{1}{N} \\sum_{i=1}^{N} \\mathbf{x}_{i} $$</p><p>\uFF082\uFF09\u4FE1\u606F\u7684\u6B63\u5411\u4F20\u64AD<br> \u5047\u5B9A\u5F53\u524D\u5C42$l$\u662FPooling\u5C42\uFF0C\u4F5C\u4E3APooling\u5C42\u53EF\u4EE5\u6CA1\u6709\u53C2\u6570\uFF0C\u56E0\u6B64\u6CA1\u6709\u53C2\u6570\u9700\u8981\u66F4\u65B0\uFF0C\u5B83\u53EA\u662F\u5C06\u8F93\u51FA\u6570\u636E\u7684\u7EF4\u5EA6\u6309\u7167\u67D0\u79CD\u65B9\u5F0F\u53D8\u5C0F\u4E86\u3002Pooling \u5C42\u7684\u8F93\u5165\u4E3A$a_{l-1}$\uFF0C\u5176\u8F93\u51FA$a_{l}$\u53EF\u8868\u793A\u4E3A</p><p>$$ a_{l} = down(a_{l-1}) $$</p><p>\u5176\u4E2D$down(\\cdot)$\u8868\u793A\u4E0B\u91C7\u6837\u51FD\u6570\u3002</p><p>\u5F53\u7136\u4E5F\u53EF\u4EE5\u5F15\u5165\u975E\u7EBF\u6027\u6FC0\u6D3B\u51FD\u6570$f(\\cdot)$\u548CPooling\u5C42\u53C2\u6570$\\beta$(\u4E58\u6027\u504F\u7F6E)\u53CA$b$(\u52A0\u6027\u504F\u7F6E)\uFF0C\u5219Pooling\u5C42\u5F97\u5230\u5982\u4E0B\u8F93\u51FA</p><p>$$ \\mathbf{a}<em>{\\ell}=f\\left(\\beta \\operatorname{down}\\left(\\mathbf{a}</em>{\\ell-1}\\right)+b \\mathbf{1} \\mathbf{1}^{T}\\right) $$</p><p>\uFF083\uFF09Pooling\u5C42\u53C2\u6570\u5B66\u4E60<br> \u4EE4$z_{l}=\\beta down(a_{l-1})+b11^T$\u548C$\\delta_{l}=\\nabla_{z_{l}}J$\u3002</p><p>1\uFF09\u53C2\u6570$\\beta$\u7684\u68AF\u5EA6<br> \u5FAE\u5206</p><p>$$ \\begin{aligned} d(J ; \\beta) &amp;=\\operatorname{Tr}\\left(D\\left[J ; \\mathbf{z}<em>{\\ell}\\right] d(\\mathbf{z} ; \\beta)\\right) \\ &amp;=\\operatorname{Tr}\\left(\\delta</em>{\\ell}^{T} \\operatorname{down}\\left(\\mathbf{a}_{\\ell-1}\\right)\\right) d \\beta \\end{aligned} $$</p><p>\u5F97\u5230\u68AF\u5EA6</p><p>$$ \\nabla_{\\beta} J=\\operatorname{Tr}\\left(\\delta_{\\ell}^{T} \\operatorname{down}\\left(\\mathbf{a}<em>{\\ell-1}\\right)\\right)=\\mathbf{1}^{T}\\left(\\delta</em>{\\ell} \\circ \\operatorname{down}\\left(\\mathbf{a}_{\\ell-1}\\right)\\right) \\mathbf{1} $$</p><p>\u8FD9\u91CC\u5229\u7528\u4E86$Tr(A^{T}B) = 1^{T}(A \\circ B)1$.</p><p>2)\u53C2\u6570$b$\u7684\u68AF\u5EA6<br> \u6C42\u5FAE\u5206</p><p>$$ \\begin{aligned} d(J ; b) &amp;=\\operatorname{Tr}\\left(D\\left[J ; \\mathbf{z}<em>{\\ell}\\right] d(\\mathbf{z}, b)\\right) \\ &amp;=\\operatorname{Tr}\\left(\\delta</em>{\\ell}^{T} \\mathbf{1} \\mathbf{1}^{T}\\right) d b \\end{aligned} $$</p><p>\u5F97\u5230\u68AF\u5EA6</p><p>$$ \\nabla_{b}J = 1^{T}\\nabla_{l}1 $$</p><h3 id="_6-3-\u6B8B\u5DEE-delta-l-\u7684\u53CD\u5411\u4F20\u64AD" tabindex="-1"><a class="header-anchor" href="#_6-3-\u6B8B\u5DEE-delta-l-\u7684\u53CD\u5411\u4F20\u64AD" aria-hidden="true">#</a> 6.3 \u6B8B\u5DEE$\\delta_{l}$\u7684\u53CD\u5411\u4F20\u64AD</h3><p>\u5377\u79EF\u5C42\u548CPooling\u5C42\u53C2\u6570\u66F4\u65B0\u90FD\u9700\u8981\u4F7F\u7528\u53CD\u5411\u4F20\u64AD\u7684\u6B8B\u5DEE$\\delta_{l}$\u3002\u7136\u800C\uFF0C$\\delta_{l}$\u7684\u4F20\u64AD\u4E0E\u7F51\u7EDC\u7684\u4E0A\u5C42\u6709\u5173\u3002CNN\u901A\u5E38\u67B6\u6784\u4E3A\uFF1A</p><p>$$ \\text{\u8F93\u51FA\u5C42} \\rightarrow \\text{\u5377\u79EF\u5C42} \\rightarrow \\text{Pooling\u5C42} \\rightarrow \\text{\u5377\u79EF\u5C42} \\rightarrow \\text{Pooling\u5C42} \\rightarrow \\cdot \\cdot \\cdot \\rightarrow \\text{\u5168\u8FDE\u63A5\u5C42} \\rightarrow \\text{\u8F93\u51FA\u5C42} $$</p><p>\uFF081\uFF09\u5377\u79EF\u5C42\u6B8B\u5DEE$\\delta_{l}$\uFF1A\u7ECFPooling\u5C42\u4F20\u64AD\u5F97\u5230<br> \u5728\u5377\u79EF\u5C42\u53C2\u6570\u66F4\u65B0\u6240\u7528\u7684\u6B8B\u5DEE$\\delta_{l}$\u662F\u7531Pooling\u5C42\u7684\u6B8B\u5DEE$\\delta_{l+1}$\u53CD\u5411\u4F20\u64AD\u56DE\u6765\u7684\uFF0C\u5176\u4FE1\u606F\u7684\u6B63\u5411\u4F20\u64AD\u7684\u7F51\u7EDC\u7ED3\u6784\u5173\u7CFB\u4E3A</p><p><img src="`+$+'" alt="01"></p><p>\u9996\u5148\uFF0C\u9700\u8981\u5148\u786E\u5B9A\u5377\u79EF\u5C42\u51C0\u8F93\u5165$z_{l}$\u4E0EPooling\u5C42\u51C0\u8F93\u5165$z_{l+1}$\u95F4\u7684\u5173\u7CFB\uFF08\u590D\u5408\u51FD\u6570\u5173\u7CFB\uFF09\uFF0C\u7136\u540E\uFF0C\u5229\u7528\u590D\u5408\u51FD\u6570\u7684\u6C42\u5BFC\u5173\u7CFB\u6765\u786E\u5B9A\u5377\u79EF\u5C42\u6B8B\u5DEE$\\delta_{l}$\u548CPooling\u5C42\u6B8B\u5DEE$\\delta_{l+1}$\u95F4\u7684\u5173\u7CFB\u3002</p><p>\u4FE1\u606F\u7684\u6B63\u5411\u4F20\u64AD\u8FC7\u7A0B\u4E3A</p><p><img src="'+c+'" alt="02"></p><p>\u7531\u4E8E\u5B58\u5728\u7740\u4E0B\u91C7\u6837\u8FD0\u7B97$down(\\cdot)$\uFF0C\u4ECE\u800C\u4F7F\u5F97$a_{l}$\u4E2D\u7684\u4E00\u4E2A\u5927\u5C0F\u4E3A$n \\times n$\u7684\u5757\u5BF9\u5E94$z_{l+1}$\u4E2D\u7684\u4E00\u4E2A\u5143\u7D20\u3002\u53EF\u901A\u8FC7\u5B9A\u4E49\u4E0A\u91C7\u6837$up(\\cdot)$\u5C06Pooling\u5C42\u7684\u4FE1\u606F\u4F20\u64AD\u5199\u4F5C</p><p><img src="'+d+'" alt="03"></p><p>\u56E0\u6B64</p><p>$$ \\delta_{l} = \\nabla_{z_{l}}J = \\beta(up(\\delta_{l+1})\\circ f^{&#39;}(z_{l})) $$</p><p>\u8FD9\u662F\u6B8B\u5DEE\u7ECF\u8FC7Pooling\u5C42\u7684\u53CD\u5411\u4F20\u9012\u8FC7\u7A0B\u3002</p><p>\uFF082\uFF09Pooling\u5C42\u6B8B\u5DEE$\\delta_{l}$\uFF1A\u7ECF\u5377\u79EF\u5C42\u5F97\u5230<br> Pooling\u5C42\u53C2\u6570\u66F4\u65B0\u6240\u7528\u5230\u7684\u6B8B\u5DEE$\\delta_{l}$\u662F\u7531\u5377\u79EF\u5C42\u7684\u6B8B\u5DEE$\\delta_{l+1}$\u53CD\u5411\u4F20\u64AD\u5F97\u5230\u7684\uFF0C\u5176\u4FE1\u606F\u7684\u6B63\u5411\u4F20\u64AD\u7684\u7F51\u7EDC\u7ED3\u6784\u5173\u7CFB\u4E3A\uFF1A</p><p><img src="'+_+`" alt="04"></p><p>\u4E0A\u5F0F\u6240\u5BF9\u5E94\u7684Matlab\u4EE3\u7801\u4E3A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>delta_l <span class="token operator">=</span> <span class="token function">conv2</span><span class="token punctuation">(</span><span class="token function">rot90</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> delta_l_1_plus<span class="token punctuation">,</span> <span class="token string">&#39;full&#39;</span><span class="token punctuation">)</span> circ <span class="token function">df</span><span class="token punctuation">(</span>z_l<span class="token punctuation">)</span>
<span class="token comment">//\u8FD9\u91CC\u6240\u7528\u7684\u5377\u79EF\u65B9\u5F0F\u662F&#39;full&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>\u300C\u6211\u7CFB\u{1F426}\u300D</p></blockquote>`,89),f=e("\u63A5 \u25B6\uFE0F "),k={href:"https://zhaoylong.github.io/2019/09/25/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%AE%80%E8%BF%B0/",target:"_blank",rel:"noopener noreferrer"},x=e("\u300A\u5377\u79EF\u795E\u7ECF\u7F51\u7EDC\u7B80\u8FF0\u300B\uFF08\u7B2C\u4E09\u7BC7\uFF09"),w={href:"https://www.jianshu.com/p/fc9175065d87",target:"_blank",rel:"noopener noreferrer"},v=e("\u901A\u4FD7\u6613\u61C2\u7684CNN\u4ECB\u7ECD"),T=a("h1",{id:"\u9E23\u8C22",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#\u9E23\u8C22","aria-hidden":"true"},"#"),e(" \u9E23\u8C22")],-1),N=a("p",null,"[1] Shi-wen Deng.\u6DF1\u5EA6\u5B66\u4E60\u8BB2\u4E49.2018-02-26",-1),z=a("p",null,"[2] Ian Goodfellow,Yoshua Bengio,Aaron Courville.Deep Learning.2017-09-14[\u6C49\u8BD1\u7248]",-1),B=e("\u672C\u7BC7\u7B14\u8BB0\u9996\u6B21\u53D1\u5E03\u4E8E "),P={href:"http://ZhaoYLong.github.io",target:"_blank",rel:"noopener noreferrer"},E=e("Laqudee.Z Blog"),J=e(", \u4F5C\u8005 "),j={href:"http://github.com/ZhaoYLong",target:"_blank",rel:"noopener noreferrer"},C=e("@Laqudee"),q=e(" ,\u8F6C\u8F7D\u8BF7\u4FDD\u7559\u539F\u6587\u94FE\u63A5.");function y(A,D){const n=o("ExternalLinkIcon");return p(),r(s,null,[a("blockquote",null,[a("p",null,[h,a("a",g,[u,t(n)])])]),b,a("blockquote",null,[a("p",null,[f,a("a",k,[x,t(n)])])]),a("blockquote",null,[a("p",null,[a("a",w,[v,t(n)])])]),T,N,z,a("blockquote",null,[a("p",null,[B,a("a",P,[E,t(n)]),J,a("a",j,[C,t(n)]),q])])],64)}var L=l(m,[["render",y],["__file","2019-09-21-\u5377\u79EF\u795E\u7ECF\u7F51\u7EDC\u7B80\u8FF0.html.vue"]]);export{L as default};
